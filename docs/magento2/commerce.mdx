---
sidebar_position: 10
title: Commerce Features
description:
  As of version 2.12, Front-Commerce comes with a Magento2 Commerce module to
  leverage Adobe Commerce specific features. This guide explains how to
  configure and use it.
---

import ContactLink from "@site/src/components/ContactLink";
import SinceVersion from "@site/src/components/SinceVersion";

<SinceVersion tag="2.11" />;

<p>{frontMatter.description}</p>

The Adobe Commerce improves existing features such as Cms Pages (to partially
expose
[the Page Hierarchy mechanism](https://docs.magento.com/user-guide/cms/page-hierarchy.html))
and bring support for Adobe Commerce specific features such as

<abbr title="Return Merchandise Authorization">RMA</abbr> or Store Credits.

## Enable Magento Commerce support

### Magento2 Commerce module installation

You need to install the
[`front-commerce/magento2-commerce-module` module](https://gitlab.blackswift.cloud/front-commerce/magento2-commerce-module-front-commerce/):

```shell
composer config repositories.front-commerce-magento2-commerce git \
    git@gitlab.blackswift.cloud:front-commerce/magento2-commerce-module-front-commerce.git

composer require front-commerce/magento2-commerce-module

php bin/magento setup:upgrade
```

### Front-Commerce configuration

To enable Magento2 Commerce features, you need to enable the Magento2 Commerce
module:

```diff
diff --git a/.front-commerce.js b/.front-commerce.js
index d607e0c..426619f 100644
--- a/.front-commerce.js
+++ b/.front-commerce.js
@@ -13,6 +13,7 @@ module.exports = {
       path: "datasource-elasticsearch/server/modules/magento2-elasticsearch",
     },
     { name: "Magento2", path: "server/modules/magento2" },
+    { name: "Magento2Commerce", path: "server/modules/magento2-commerce" },
   ],
   webModules: [
     { name: "FrontCommerce", path: "front-commerce/src/web" },
```

After having restarted Front-Commerce, the Magento2 Commerce module should be
enabled.

## Features

### Cms Page children

The `magento2-commerce` module improves the Graph to expose the children pages
of a Cms Page. With this module, you can for instance run the following the
query:

```graphql
query CmsPage {
  cmsPageList(identifiers: ["customer-service"]) {
    identifier
    title
    children {
      # <- only available with magento2-commerce module
      identifier
      title
    }
  }
}
```

Depending the actual page hierarchy in Magento2, it could return something like:

```json
{
  "data": {
    "cmsPageList": [
      {
        "identifier": "customer-service",
        "title": "Customer Service",
        "children": [
          {
            "identifier": "how-to-return",
            "title": "How to return a product"
          },
          {
            "identifier": "faq",
            "title": "Frequently asked questions"
          }
        ]
      }
    ]
  }
}
```

This can be handy to build a structured menu for instance.

### <abbr title="Return Merchandise Authorization">RMA</abbr>

The `magento2-commerce` module implements the required GraphQL resolvers to
provide
[Front-Commerce Return Merchandise Authorization features](/docs/advanced/features/return-merchandise-authorization)
using Adobe Commerce APIs.

Enabling the module is the only thing you'll have to do. It would then work as
you might expect.

#### Known issues

As of Adobe Commerce 2.4.4, there are **known issues** in the Adobe Commerce
APIs used by Front-Commerce. It leads to some minor limitations explained in
this section.

##### Impossible to use the feature with "Use Store Address" enabled

You may encounter an "_Address for returns is not configured in admin_" error
when browsing pages using RMA-related data in your application (e.g: browsing an
order page):

```
An error occurred during an inner GraphQL query xxxxxxx
[â€¦]
  "data": [
    {
      "message": "Address for returns is not configured in admin.",
      "extensions": {
        "category": "graphql-no-such-entity"
      },
```

This error is due to a configuration in Magento that doesn't seem to be
supported yet.

Please check your RMA settings ("_Configuration > Sales > RMA Settings_") and
ensure that "_Use Store Address_" is "_No_" if it isn't the case yet. You will
have to duplicate your return store address information here, which will make
the above error disappear.

![RMA settings section in Mageento's admin area, with the "Use Store Address" configuration enabled](./assets/rma-use-store-address.png)

##### Processed and Closed RMA have no status displayed

When a return is "_Processed and Closed_" in Magento, the Magento GraphQL API
returns a `null` value for the status.

Under the hood, the following error is occurring in Magento:

> report.ERROR: Expected a value of type "ReturnStatus" but received: (empty
> string) (status is `null` )

[We've decided](https://gitlab.blackswift.cloud/front-commerce/front-commerce/-/merge_requests/1382/#note_1020963128)
to cope with this flaw, ignore the error and display an empty status for such
returns.

![List of Returns with an empty status value for a processed and closed one](./assets/rma-no-status.png)

##### Impossible to create a new return (patch needed)

[A known bug in Magento core](https://github.com/magento/magento2/issues/35910#issuecomment-1238916647)
can lead to an error "_Value of reason is incorrect_" when creating a new
Return.

The Front-Commerce Magento2 OpenSource module contains a patch for this known
issue
[since its version 2.8.3](https://gitlab.blackswift.cloud/front-commerce/magento2-module-front-commerce/-/releases/2.8.3).

Please ensure that your project is properly patched by ensuring that L42 of
`vendor/magento/module-eav/Model/ResourceModel/Entity/Attribute/OptionValueProvider.php`
filters on ` option_id` instead of `value_id`.

If it isn't the case, there is an issue with the patching process in your
project. <ContactLink>Contact us and we'll help you to troubleshoot
this</ContactLink>.
